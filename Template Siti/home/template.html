<!doctype html>
<html lang="it" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>4AIX — Template Web Professionali</title>
  <meta name="description" content="Esplora i template web di 4AIX, pronti all'uso e ottimizzati per mobile e personalizzazione.">
  <link rel="icon" href="../../img/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    :root {
      --accent: #2563eb;
      --bg-dark: #0f172a;
      --text-dark: #f8fafc;
      --bg-light: #f8fafc;
      --text-light: #0f172a;
      --muted: #64748b;
      --radius: 16px;
    }

    html[data-theme="dark"] { background: var(--bg-dark); color: var(--text-dark); }
    html[data-theme="light"] { background: var(--bg-light); color: var(--text-light); }

    body {
      font-family: Inter, system-ui, sans-serif;
      margin: 0;
      padding: 0;
      transition: background .25s, color .25s;
    }

    /* === BACK BUTTON === */
    .back-home {
        position: fixed;
        top: 16px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--accent);
        color: white;
        border: none;
        border-radius: 10px;
        padding: 8px 16px;
        cursor: pointer;
        font-weight: 600;
        font-size: 14px;
        transition: all .2s ease;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 8px;
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }

    .back-home:hover {
        transform: translateX(-50%) scale(1.05);
        box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
    }

    /* === ICONS === */
    .language-selector, .theme-toggle {
      position: fixed;
      top: 16px;
      width: 36px;
      height: 36px;
      background: transparent;
      border: none;
      color: inherit;
      cursor: pointer;
      font-size: 20px;
      transition: transform .2s ease, opacity .2s;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .language-selector {
      left: 18px;
      width: auto;
      padding: 0 12px;
      gap: 8px;
    }
    
    .theme-toggle { 
      right: 18px; 
    }
    
    .language-selector:hover, .theme-toggle:hover {
      transform: scale(1.1);
      opacity: 0.8;
    }

    .language-text {
      font-size: 14px;
      font-weight: 600;
    }

    header {
      text-align: center;
      padding: 80px 20px 24px 20px;
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }
    header h1 { margin: 0; font-size: 26px; }
    header p { margin: 6px 0 0; font-size: 14px; color: var(--muted); }

    /* === MENU === */
    .menu {
      display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin-top: 18px;
    }
    .menu button {
      background: transparent;
      border: 1px solid var(--accent);
      color: var(--accent);
      padding: 8px 14px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 700;
      transition: all .15s;
    }
    .menu button.active {
      background: var(--accent);
      color: #fff;
    }

    /* === GRID === */
    main {
      max-width: 1200px;
      margin: 20px auto;
      padding: 18px;
      display: grid;
      gap: 20px;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }
    .card {
      background: rgba(255,255,255,0.03);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
      transition: transform .22s, box-shadow .22s;
      display: flex;
      flex-direction: column;
    }
    html[data-theme="light"] .card { background: #fff; box-shadow: 0 6px 18px rgba(0,0,0,0.08); }
    .card:hover { transform: translateY(-6px); box-shadow: 0 12px 36px rgba(0,0,0,0.25); }

    .thumb { height:180px; background-size:cover; background-position:center; }
    .content { padding:14px; display:flex; flex-direction:column; gap:10px; }
    .title { font-weight:800; font-size:16px; }
    .desc { color:var(--muted); font-size:14px; line-height:1.4; }
    .btn { display:inline-block; background:var(--accent); color:#fff; padding:8px 12px; border-radius:10px; text-decoration:none; font-weight:700; width:fit-content; }

    footer { text-align:center; color:var(--muted); padding:18px; font-size:13px; }
  </style>
</head>
<body>
  <!-- === BACK BUTTON === -->
  <button id="backHome" class="back-home" title="Torna alla homepage">
    <i class="fa-solid fa-arrow-left"></i>
    <span id="backText">Torna alla Homepage</span>
  </button>

  <!-- === ICONS === -->
  <button id="langToggle" class="language-selector" title="Cambia lingua">
    <i class="fas fa-globe"></i>
    <span class="language-text">IT</span>
  </button>
  
  <button id="themeToggle" class="theme-toggle" title="Cambia tema">
    <i id="themeIcon" class="fas fa-moon"></i>
  </button>

  <header>
    <h1>Template Web 4AIX</h1>
    <p id="subtitle">Scopri tutti i nostri modelli pronti all'uso</p>
    <div class="menu" id="categoryMenu"></div>
  </header>

  <main id="templateGrid"></main>

  <footer>
    © <span id="year"></span> 4AIX di C.B. — <span id="rights">Tutti i diritti riservati</span>
  </footer>

  <script>
    /* === DATA === */
    const templates = {
      aziendale: [
        { title: { it:"Sito Aziendale Base", en:"Corporate Website" },
          desc: { it:"Struttura pulita e moderna, ideale per aziende o studi professionali.", en:"Clean, modern layout ideal for businesses or professional firms." },
          img: "https://images.unsplash.com/photo-1503387762-592deb58ef4e?w=800",
          link: "../templates/aziendale/index.html" }
      ],
      ecommerce: [
        { title: { it:"E-commerce Moderno", en:"Modern E-commerce" },
          desc: { it:"Layout elegante, ottimizzato per la vendita di prodotti.", en:"Elegant responsive layout optimized for product sales." },
          img: "https://images.unsplash.com/photo-1542744095-291d1f67b221?w=800",
          link: "../templates/ecommerce/index.html" }
      ],
      portfolio: [
        { title: { it:"Portfolio Creativo", en:"Creative Portfolio" },
          desc: { it:"Design minimalista per fotografi, artisti o designer.", en:"Minimalist design for photographers, artists, or designers." },
          img: "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=800",
          link: "../templates/portfolio/index.html" }
      ],
      trading: [
        { title: { it:"Trading Dashboard", en:"Trading Dashboard" },
          desc: { it:"Interfaccia chiara e dinamica per analisi di mercato.", en:"Dynamic, clear interface for market analysis." },
          img: "https://images.unsplash.com/photo-1605902711622-cfb43c4437d6?w=800",
          link: "../templates/trading/index.html" }
      ]
    };

    const translations = {
      it: {
        subtitle: "Scopri tutti i nostri modelli pronti all'uso",
        rights: "Tutti i diritti riservati",
        openDemo: "Apri Demo",
        backHome: "Torna alla Homepage",
        categories: { all:"Tutti", aziendale:"Aziendale", ecommerce:"E-commerce", portfolio:"Portfolio", trading:"Trading" }
      },
      en: {
        subtitle: "Discover all our ready-to-use templates",
        rights: "All rights reserved",
        openDemo: "Open Demo",
        backHome: "Back to Homepage",
        categories: { all:"All", aziendale:"Business", ecommerce:"E-commerce", portfolio:"Portfolio", trading:"Trading" }
      }
    };

    /* === THEME & LANGUAGE SYNC === */
    let currentLang = localStorage.getItem("lang") || "it";
    let currentTheme = localStorage.getItem("theme") || "dark";

    // Inizializzazione tema
    document.documentElement.setAttribute("data-theme", currentTheme);

    // Elementi DOM
    const langBtn = document.getElementById("langToggle");
    const themeBtn = document.getElementById("themeToggle");
    const themeIcon = document.getElementById("themeIcon");
    const languageText = document.querySelector('.language-text');
    const subtitleEl = document.getElementById("subtitle");
    const rightsEl = document.getElementById("rights");
    const menuEl = document.getElementById("categoryMenu");
    const gridEl = document.getElementById("templateGrid");
    const backTextEl = document.getElementById("backText");

    /* === FUNZIONI SINCRONIZZATE === */
    function updateThemeIcon() {
        themeIcon.className = currentTheme === "dark" ? "fas fa-sun" : "fas fa-moon";
    }

    function updateLanguageText() {
        if (languageText) {
            languageText.textContent = currentLang.toUpperCase();
        }
    }

    function toggleLang() {
        currentLang = currentLang === "it" ? "en" : "it";
        localStorage.setItem("lang", currentLang);
        updateLanguageText();
        renderMenu(); 
        renderGrid(); 
        updateTexts();
        // Trigger per sincronizzare altre pagine
        window.localStorage.setItem('langUpdate', Date.now().toString());
    }

    function toggleTheme() {
        currentTheme = currentTheme === "dark" ? "light" : "dark";
        document.documentElement.setAttribute("data-theme", currentTheme);
        localStorage.setItem("theme", currentTheme);
        updateThemeIcon();
        // Trigger per sincronizzare altre pagine
        window.localStorage.setItem('themeUpdate', Date.now().toString());
    }

    /* === SINCRONIZZAZIONE CROSS-PAGE === */
    function setupCrossPageSync() {
        // Ascolta cambiamenti da altre pagine
        window.addEventListener('storage', (e) => {
            if (e.key === 'lang' && e.newValue) {
                currentLang = e.newValue;
                updateLanguageText();
                renderMenu();
                renderGrid();
                updateTexts();
            }
            if (e.key === 'theme' && e.newValue) {
                currentTheme = e.newValue;
                document.documentElement.setAttribute("data-theme", currentTheme);
                updateThemeIcon();
            }
            if (e.key === 'langUpdate' || e.key === 'themeUpdate') {
                // Forza aggiornamento da localStorage
                const lang = localStorage.getItem('lang') || 'it';
                const theme = localStorage.getItem('theme') || 'dark';
                
                if (lang !== currentLang) {
                    currentLang = lang;
                    updateLanguageText();
                    renderMenu();
                    renderGrid();
                    updateTexts();
                }
                
                if (theme !== currentTheme) {
                    currentTheme = theme;
                    document.documentElement.setAttribute("data-theme", currentTheme);
                    updateThemeIcon();
                }
            }
        });
    }

    /* === RENDER FUNCTIONS === */
    function renderMenu() {
      const cats = translations[currentLang].categories;
      const order = ["all","aziendale","ecommerce","portfolio","trading"];
      menuEl.innerHTML = order.map(k => `<button data-cat="${k}" class="${k===currentCategory?'active':''}">${cats[k]}</button>`).join('');
      menuEl.querySelectorAll("button").forEach(btn=>{
        btn.addEventListener("click",()=>{
          currentCategory = btn.dataset.cat;
          renderMenu(); renderGrid();
        });
      });
    }

    function renderGrid() {
      const keys = currentCategory==="all" ? Object.keys(templates) : [currentCategory];
      const list = keys.flatMap(k => templates[k] || []);
      const tr = translations[currentLang];
      gridEl.innerHTML = list.map(t => `
        <div class="card">
          <div class="thumb" style="background-image:url('${t.img}')"></div>
          <div class="content">
            <div class="title">${t.title[currentLang]}</div>
            <div class="desc">${t.desc[currentLang]}</div>
            <a class="btn" href="${t.link}" target="_blank">${tr.openDemo}</a>
          </div>
        </div>`).join('');
    }

    function updateTexts(){
      const tr = translations[currentLang];
      subtitleEl.textContent = tr.subtitle;
      rightsEl.textContent = tr.rights;
      backTextEl.textContent = tr.backHome;
    }

    /* === SYNC BETWEEN PAGES === */
    window.addEventListener('storage', e => {
      if(e.key === 'lang' || e.key === 'theme') location.reload();
    });

    /* === INIT === */
    let currentCategory = "all";
    
    langBtn.addEventListener("click", toggleLang);
    themeBtn.addEventListener("click", toggleTheme);
    
    document.getElementById('backHome').addEventListener('click', () => {
      window.location.href = '../../index.html';
    });
    
    // Aggiorna stati iniziali
    updateThemeIcon();
    updateLanguageText();
    
    // Attiva sincronizzazione
    setupCrossPageSync();

    document.getElementById("year").textContent = new Date().getFullYear();
    renderMenu(); 
    renderGrid(); 
    updateTexts();
  </script>
</body>
</html>
